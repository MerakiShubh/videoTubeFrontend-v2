import{H as g,ax as N,r as w,j as e,ay as v,az as B,L as T,X as L}from"./index-QFptoyZp.js";import{u as P}from"./video.hook-D9MhAd0S.js";import{V as t}from"./VideolistCardSkeleton-D2Wn8jTl.js";function k(){const{query:r}=g(),[i,x]=N(),[d,a]=w.useState(!1),h=i.get("sortBy")||"",m=i.get("sortType")||"",o=r;console.log("Here is title",o);const{data:l,isLoading:u,isError:f,fetchNextPage:y,hasNextPage:j,isFetchingNextPage:c}=P({title:o,sortBy:h,sortType:m}),p=(s,b="asc")=>{x({sortBy:s,sortType:b})};if(u)return e.jsxs("div",{className:"flex flex-col justify-center gap-3 items-center w-full my-3",children:[e.jsx(t,{}),e.jsx(t,{}),e.jsx(t,{}),e.jsx(t,{}),e.jsx(t,{})]});if(f)return e.jsx("div",{className:"flex w-full justify-center items-center h-screen  text-white",children:e.jsx("p",{className:"text-xl",children:"Error loading videos. Please try again later."})});const n=(l==null?void 0:l.pages.flatMap(s=>s.docs))||[];return n.length===0?e.jsx("div",{className:"flex justify-center items-center w-full h-screen  text-white",children:e.jsx("p",{className:"text-xl",children:"No videos found. Try a different search term."})}):e.jsx("div",{className:" min-h-screen w-full",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white",children:['Search Results for "',r,'"']}),e.jsxs("button",{className:"flex items-center space-x-2 text-blue-400 hover:text-blue-300 transition-colors duration-200",onClick:()=>a(s=>!s),children:[e.jsx("span",{children:"Filters"}),e.jsx(v,{size:16})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 mt-7",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Search filters"}),e.jsx("button",{onClick:()=>a(!1),children:e.jsx(B,{size:24,className:"text-gray-400 hover:text-white transition-colors duration-200"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white border-b border-gray-700 pb-2",children:"Sort By"}),e.jsx("ul",{className:"space-y-2",children:[{label:"Upload date (Latest)",sortBy:"createdAt",sortType:"desc"},{label:"Upload date (Oldest)",sortBy:"createdAt",sortType:"asc"},{label:"View count (Low to High)",sortBy:"views",sortType:"asc"},{label:"View count (High to Low)",sortBy:"views",sortType:"desc"},{label:"Duration (Low to High)",sortBy:"duration",sortType:"asc"},{label:"Duration (High to Low)",sortBy:"duration",sortType:"desc"}].map(s=>e.jsx("li",{children:e.jsx("button",{className:"text-gray-300 hover:text-blue-400 transition-colors duration-200 w-full text-left",onClick:()=>{p(s.sortBy,s.sortType),a(!1)},children:s.label})},s.label))})]})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:n.map(s=>e.jsx(T,{to:`/video/${s==null?void 0:s._id}`,children:e.jsx(L,{video:s})},s==null?void 0:s._id))}),j&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("button",{onClick:()=>y(),disabled:c,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200 disabled:opacity-50",children:c?"Loading more...":"Load More"})})]})})}export{k as default};
