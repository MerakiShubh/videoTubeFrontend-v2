import{z as n,a as g,c as b,t as j,j as e}from"./index-QFptoyZp.js";import{f}from"./user.hook-DPHpX6oN.js";import{P as y}from"./ProgressBar-Co1JsP3d.js";const N=n.object({username:n.string().nonempty({message:"Username cannot be empty"}).regex(/^\S*$/,{message:"Username cannot contain spaces"}).regex(/^[a-z]*$/,{message:"Username must be lowercase"}),description:n.string().max(275,{message:"Description must be less than 275 characters"})});function U(){const s=g(r=>r.auth.user),{register:i,handleSubmit:c,reset:d,watch:m,formState:{errors:a}}=b({resolver:j(N),defaultValues:{username:s==null?void 0:s.username,description:(s==null?void 0:s.description)||""},mode:"onChange"}),o=275-m("description").length,{mutateAsync:p,isPending:t}=f(),x=async r=>{const{username:u,description:h}=r,l={username:s==null?void 0:s.username,description:s==null?void 0:s.description};(u!==l.username||h!==l.description)&&await p(r)};return e.jsxs("div",{className:"flex flex-wrap justify-center gap-y-4 py-4",children:[t&&e.jsx(y,{}),e.jsxs("div",{className:"w-full sm:w-1/2 lg:w-1/3",children:[e.jsx("h5",{className:"font-semibold",children:"Channel Info"}),e.jsx("p",{className:"text-gray-300",children:"Update your Channel details here."})]}),e.jsx("div",{className:"w-full sm:w-1/2 lg:w-2/3",children:e.jsxs("form",{onSubmit:c(x),className:"rounded-2xl ",children:[e.jsxs("div",{className:"flex flex-wrap gap-y-4 p-4 bg-gray-900 rounded-2xl",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-1 inline-block",htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"flex bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"flex shrink-0 items-center px-3 border-r align-middle",children:"videoTube.vercel.app/"}),e.jsx("input",{type:"text",className:"w-full bg-transparent px-2 py-1.5",id:"username",placeholder:"@username",...i("username")})]}),a.username&&e.jsx("p",{className:"text-md text-red-500",children:a.username.message})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-1 inline-block",htmlFor:"desc",children:"Description"}),e.jsx("textarea",{className:"w-full rounded-lg bg-gray-700 px-2 py-1.5",rows:"4",id:"desc",placeholder:"Channel Description",...i("description")}),e.jsxs("p",{className:"mt-0.5 text-sm text-gray-300",children:[o," characters left"]}),a.description&&e.jsx("p",{className:"text-md text-red-500",children:a.description.message})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 p-4",children:[e.jsx("button",{type:"button",onClick:()=>d(),disabled:t,className:"inline-block rounded bg-red-700 px-3 py-1.5 hover:bg-red-500",children:"Reset"}),e.jsx("button",{type:"submit",disabled:t,className:"inline-block hover:bg-green-500 bg-green-700 text-white rounded px-3 py-1.5",children:"Save changes"})]})]})})]})}export{U as default};
