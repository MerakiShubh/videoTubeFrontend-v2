import{r as u,j as e,a as f,L as g,Z as h,O as v}from"./index-QFptoyZp.js";import{d as j}from"./default-cover-photo-BgWz7UIz.js";import{c as p,d as w}from"./index-DBWwwFmM.js";import{d as N,e as y}from"./user.hook-DPHpX6oN.js";function C({avatar:s}){const[n,o]=u.useState(null),[c,t]=u.useState(s||""),{mutateAsync:i,isPending:r}=N(),m=async()=>{var d,a;if(!n)return;const l=await i(n);l&&(t((a=(d=l==null?void 0:l.data)==null?void 0:d.avatar)==null?void 0:a.url),o(null))};return e.jsxs("div",{className:" relative h-full w-full rounded-full bg-blue-300/20 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${c})`},children:[r&&e.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500"})}),e.jsxs("label",{htmlFor:"profileImg",className:`absolute inset-0 flex justify-center items-center ${r?"cursor-progress":"cursor-pointer"}`,children:[e.jsx("input",{type:"file",id:"profileImg",accept:"image/*",style:{display:"none"},disabled:r,onChange:l=>{t(URL.createObjectURL(l.target.files[0])),o(l.target.files[0])}}),e.jsxs("div",{className:"relative h-full w-full justify-center items-center gap-4 z-30 flex flex-col",children:[n&&e.jsx("button",{className:`bg-blue-500 text-white p-1 rounded-full hover:bg-blue-600 text-sm ${r&&"cursor-not-allowed"}`,onClick:m,title:"Upload Avatar",disabled:r,children:e.jsx(p,{className:"w-8 h-8"})}),e.jsx("span",{className:"bg-white z-40 rounded-full absolute right-0 bottom-0 p-1",children:e.jsx(w,{className:"w-6 text-blue-500 hover:opacity-100"})})]})]})]})}function P({children:s,setCoverImage:n,coverImage:o}){const[c,t]=u.useState(o||""),[i,r]=u.useState(null),{mutateAsync:m,isPending:l}=y(),d=async()=>{var x,b;if(!i)return;console.log(i);const a=await m(i);a&&(t((b=(x=a==null?void 0:a.data)==null?void 0:x.coverImage)==null?void 0:b.url),r(null))};return e.jsx("div",{className:" w-full h-full mb-4 rounded-lg  text-purple-700 bg-cover bg-center bg-no-repeat items-center relative",style:{backgroundImage:`url(${c})`},children:e.jsxs("label",{htmlFor:"coverphoto",className:`gap-1 ${l?" cursor-progress":" cursor-pointer"} w-full h-full flex justify-center items-center`,children:[s,e.jsx("input",{style:{display:"none"},type:"file",id:"coverphoto",disabled:l,accept:"image/png, image/jpg, image/jpeg, image/gif",onChange:a=>{r(a.target.files[0]),t(URL.createObjectURL(a.target.files[0]))}}),e.jsxs("div",{className:"absolute inset-0 w-full h-full flex justify-center items-center",children:[l&&e.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:e.jsx("div",{className:"animate-spin rounded-full  h-14 w-14 border-t-4 border-b-4 border-purple-500"})}),i&&e.jsx("button",{className:`${l&&" cursor-not-allowed"} rounded-full bg-slate-100 text-purple-500 hover:text-purple-700 p-2`,onClick:d,title:"Upload Cover",disabled:l,children:e.jsx(p,{className:"w-9 h-9 "})})]}),e.jsxs("div",{className:`${l?"cursor-not-allowed":"cursor-pointer"} absolute right-0 bottom-0 bg-white/90 text-purple-700 flex items-center gap-1 rounded-tl-md px-2 text-center font-semibold`,children:["Cover",e.jsx(p,{})]})]})})}function L(){var o,c;const s=f(t=>t.auth.user),n=[{name:"Personal Info",path:"personal-info"},{name:"Channel Info",path:"channel-info"},{name:"Change Password",path:"change-password"}];return e.jsxs("section",{className:"w-full pb-[70px] sm:ml-[70px] sm:pb-0 lg:ml-0",children:[e.jsx("div",{className:"relative min-h-[150px] w-full pt-[16.28%]",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(P,{coverImage:((o=s==null?void 0:s.coverImage)==null?void 0:o.url)||j})})}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 pb-4 pt-6",children:[e.jsx("span",{className:"relative -mt-12 inline-block h-28 w-28 shrink-0 rounded-full border-2",children:e.jsx(C,{avatar:(c=s==null?void 0:s.avatar)==null?void 0:c.url})}),e.jsxs("div",{className:"mr-auto inline-block",children:[e.jsx("h1",{className:"font-bolg text-xl",children:s==null?void 0:s.fullName}),e.jsxs("p",{className:"text-sm text-gray-400",children:["@",s==null?void 0:s.username]})]}),e.jsx("div",{className:"inline-block",children:e.jsx("div",{className:"inline-flex min-w-[145px] justify-end",children:e.jsx(g,{to:`/channel/${s==null?void 0:s.username}`,className:"px-4 py-1.5 text-sm text-white bg-blue-800 rounded-md",children:"View Channel"})})})]}),e.jsx("ul",{className:"no-scrollbar sticky top-[66px] z-[2] flex flex-row gap-x-2 overflow-auto border-b-2 border-gray-400 bg-[#0e0e0e] py-2 sm:top-[82px]",children:n.map((t,i)=>e.jsx("li",{className:"w-full",children:e.jsx(h,{to:`/edit-profile/${t.path}`,className:({isActive:r})=>r?"w-full border-b-2 rounded bg-white px-3 py-1.5 text-black":"w-full border-b-2 border-transparent px-3 py-1.5 text-gray-400",children:t.name})},i))}),e.jsx(v,{})]})]})}export{L as default};
