import{bd as c,bc as n,aZ as o,a_ as h,aW as u,bi as b,bj as d,aU as l}from"./index-QFptoyZp.js";function p(e,t=3e3){const i=c();return setTimeout(()=>{const s=e();s&&i.reject(s)},t),i}class g{constructor(t){this.Mb=t,this.tc=n(""),this.referrerPolicy=null,t.setAttribute("frameBorder","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.Mb}setup(){o(window,"message",this.Yi.bind(this)),o(this.Mb,"load",this.hd.bind(this)),h(this.Nb.bind(this))}Nb(){const t=this.tc();if(!t.length){this.Mb.setAttribute("src","");return}const i=u(()=>this.ng());this.Mb.setAttribute("src",b(t,i))}te(t,i){var s;d||(s=this.Mb.contentWindow)==null||s.postMessage(JSON.stringify(t),i??"*")}Yi(t){var a;const i=this.Ob();if((t.source===null||t.source===((a=this.Mb)==null?void 0:a.contentWindow))&&(!l(i)||i===t.origin)){try{const r=JSON.parse(t.data);r&&this.ue(r,t);return}catch{}t.data&&this.ue(t.data,t)}}}export{g as E,p as t};
