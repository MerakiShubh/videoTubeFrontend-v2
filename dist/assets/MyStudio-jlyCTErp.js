import{f as j,r as p,j as e,$ as E,a0 as w,a as u,S as D,a1 as U,k as N,_ as b,G as L,J as V,a2 as R,a3 as I,I as M}from"./index-QFptoyZp.js";import{u as B,a as T}from"./studio.hook-DVWb_tad.js";import{a as A}from"./index-C2DofJDr.js";import{I as F,a as z}from"./index-BFUtJoa7.js";import{a as $,M as C,b as S}from"./index-DBWwwFmM.js";import{d as G,e as O,f as q,g as H}from"./video.hook-D9MhAd0S.js";import{D as P}from"./DeletePopup-BnIn5GXc.js";import{P as _}from"./ProgressBar-Co1JsP3d.js";function J(){const a=j(),[r,c]=p.useState(null),{data:o,isFetching:h}=B(),{mutateAsync:t}=G(),{mutateAsync:i,isPending:x}=O(),[d,l]=p.useState(""),n=async s=>{await t(s)},m=s=>{c(s)},y=async s=>{await i(s),c(null)},k=s=>{a(E(s)),a(w(!0))},f=p.useMemo(()=>o==null?void 0:o.filter(s=>s.title.toLowerCase().includes(d.toLowerCase())),[o,d]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full peer border-2  focus:border-white bg-transparent py-2 pl-10 pr-4 rounded-md placeholder-gray-400 outline-none transition-all duration-300 focus:shadow-lg",placeholder:"Search videos",value:d,onChange:s=>l(s.target.value)}),e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 peer-focus:text-white",size:20})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg md:block hidden",children:e.jsxs("table",{className:"w-full min-w-[1200px] text-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"Publish"}),e.jsx("th",{className:"p-4",children:"Uploaded"}),e.jsx("th",{className:"p-4",children:"Rating"}),e.jsx("th",{className:"p-4",children:"Date uploaded"}),e.jsx("th",{className:"p-4"})]})}),e.jsx("tbody",{children:f&&f.map((s,g)=>e.jsxs("tr",{className:`group ${g%2===0?"bg-[#131313]":"bg-[#0e0e0e]"}`,children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("label",{className:"relative inline-block w-12 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:s==null?void 0:s.isPublished,onChange:()=>n(s._id)}),e.jsx("span",{className:"inline-block h-6 w-full rounded-2xl bg-gray-200 duration-200 after:absolute after:bottom-1 after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-black after:duration-200 peer-checked:bg-green-300 peer-checked:after:left-7"})]})})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:`inline-block rounded-2xl border px-1.5 py-0.5 ${s!=null&&s.isPublished?"border-green-600 text-green-600":"border-red-600 text-red-600"}`,children:s!=null&&s.isPublished?"Published":"Unpublished"})})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-4",children:[r===s._id&&e.jsx(P,{onDeleteConfirm:()=>y(s._id),onCancel:()=>c(null),isDeleting:x,type:"Video"}),e.jsx("img",{className:"h-10 w-14 rounded-md object-cover",src:s==null?void 0:s.thumbnail.url,alt:s==null?void 0:s.title}),e.jsx("h3",{className:"font-semibold text-center",children:s==null?void 0:s.title})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"flex justify-center gap-4",children:e.jsxs("span",{className:"inline-block rounded-xl bg-green-200 px-1.5 py-0.5 text-green-700",children:[s==null?void 0:s.likesCount," likes"]})})}),e.jsx("td",{className:"text-center px-4 py-3 whitespace-nowrap",children:new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-GB")}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>k(s),className:"h-5 w-5 hover:text-blue-500",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsx("button",{className:"h-5 w-5 hover:text-red-500",onClick:()=>m(s._id),children:e.jsx(S,{className:"w-6 h-6"})})]})})]},s._id))})]})}),e.jsxs("div",{className:"md:hidden flex flex-wrap justify-between text-white",children:[f&&f.map((s,g)=>e.jsx("div",{className:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 p-2",children:e.jsx("div",{className:`flex flex-col rounded-lg shadow-md overflow-hidden ${g%2===0?"bg-[#0e0e0e]":"bg-[#151515]"}`,children:e.jsxs("div",{className:"p-4 gap-3 flex flex-col",children:[r===s._id&&e.jsx(P,{onDeleteConfirm:()=>y(s._id),onCancel:()=>c(null),isDeleting:x,type:"Video"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("img",{className:"h-10 w-14 rounded-md object-cover",src:s==null?void 0:s.thumbnail.url,alt:s==null?void 0:s.title}),e.jsx("h3",{className:"font-semibold",children:s==null?void 0:s.title})]}),e.jsxs("label",{className:"relative inline-block w-12 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:s==null?void 0:s.isPublished,onChange:()=>n(s._id)}),e.jsx("span",{className:"inline-block h-6 w-full rounded-2xl bg-gray-200 duration-200 after:absolute after:bottom-1 after:left-1 after:top-1 after:h-4 after:w-4 after:rounded-full after:bg-black after:duration-200 peer-checked:bg-[#ae7aff] peer-checked:after:left-7"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:`inline-block rounded-2xl border px-1.5 py-0.5 ${s!=null&&s.isPublished?"border-green-600 text-green-600":"border-orange-600 text-orange-600"}`,children:s!=null&&s.isPublished?"Published":"Unpublished"}),e.jsxs("span",{className:"inline-block rounded-xl bg-green-200 px-1.5 py-0.5 text-green-700",children:[s==null?void 0:s.likesCount," likes"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{children:["Uploaded on"," ",new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-GB")]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>k(s),className:"h-5 w-5 hover:text-blue-500",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsx("button",{className:"h-5 w-5 hover:text-red-500",onClick:()=>m(s),children:e.jsx(S,{className:"w-6 h-6"})})]})]})]})})},s._id)),e.jsx("div",{className:"mb-[14rem]"})]})]})}function W(){const a=j(),r=u(l=>l.auth.user),[c,o]=p.useState(!1),{mutateAsync:h,isPending:t}=q(),i=async l=>{const n=await h(l);return n&&a(N(!1)),n},x=()=>{if(t){b("Video is still uploading please wait",{icon:"⌛"});return}a(N(!1))},d=()=>{if(t){b("Video is still uploading please wait",{icon:"⌛"});return}o(l=>!l)};return e.jsx("div",{className:`
        mt-16 ml-0 overflow-x-hidden sm:ml-8 absolute inset-0 z-10 bg-black/50 px-4 w-full pb-[80px] pt-4 sm:px-14 sm:py-8
      `,children:e.jsxs("div",{className:"h-full overflow-auto border bg-[#0e0e0e]",children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#f1faee]",children:t?e.jsx("span",{children:"Uploading your Video..."}):"Upload Video"}),e.jsxs("div",{className:"flex gap-4 items-center justify-center",children:[e.jsx(D,{onClick:d,className:"bg-blue-500 text-[#f1faee] hover:bg-blue-400",children:"Reset"}),e.jsx("button",{onClick:x,children:e.jsx(F,{className:"w-8 h-8 text-[#f1faee] hover:text-blue-500"})})]})]}),t&&e.jsx(_,{}),e.jsx(U,{onSubmit:i,user:r,resetStatus:c,isPending:t})]})})}function K(){const a=j(),r=u(n=>n.video.videoForEdit),c=u(n=>n.auth.user),[o,h]=p.useState(!1),{mutateAsync:t,isPending:i}=H(),x=async n=>{console.log("onEdit called",n);const m=await t({videoId:r==null?void 0:r._id,data:n});return console.log("Edit result",m),m&&(a(w(!1)),a(E(null))),m},d=()=>{if(i){b("Video is still uploading please wait",{icon:"⌛"});return}h(n=>!n)},l=()=>{if(i){b("Video is still uploading please wait",{icon:"⌛"});return}a(w(!1))};return e.jsxs("div",{className:`
       mt-16 ml-0 overflow-x-hidden  sm:ml-8 absolute  inset-0 z-10 bg-black/50 px-4 w-full  pb-[80px] pt-4 sm:px-14 sm:py-8`,children:[" ",e.jsxs("div",{className:"h-full overflow-auto border bg-[#0e0e0e] ",children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[i&&e.jsx("span",{children:"Uploading your Video..."}),!i&&"Edit Video"]}),e.jsxs("div",{className:"flex gap-4 items-center justify-center",children:[e.jsx(D,{onClick:d,children:" Reset "}),e.jsx("button",{onClick:()=>l(),children:e.jsx(F,{className:"w-8 h-8"})})]})]}),i&&e.jsx(_,{}),e.jsx(U,{isEditing:!0,initialVideo:r,onSubmit:x,user:c,isPending:i,resetStatus:o})]})]})}function Q(a){return L({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"},child:[]}]})(a)}function ae(){const a=j(),r=u(l=>l.auth.user),c=u(l=>l.ui.showEditVideo),o=u(l=>l.ui.showUploadVideo),h=u(l=>l.video.videoForEdit);p.useEffect(()=>(a(V(!1)),()=>{a(V(!0))}),[a]);const{data:t,isLoading:i}=T(),x=[{icon:e.jsx(R,{}),title:"Total views",value:t==null?void 0:t.totalViews},{icon:e.jsx(I,{}),title:"Total subscribers",value:t==null?void 0:t.totalSubscribers},{icon:e.jsx(Q,{}),title:"Total likes",value:t==null?void 0:t.totalLikes},{icon:e.jsx(A,{}),title:"Total videos",value:t==null?void 0:t.totalVideos}],d=()=>{a(N(!0))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-y-6 px-4 py-8 sm:px-6 lg:px-8 bg-[#0e0e0e] text-white",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold",children:["Welcome Back, ",r==null?void 0:r.fullName]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Seamless Video Management, Elevated Results."})]}),e.jsxs("button",{onClick:d,className:"inline-flex items-center gap-x-2 bg-blue-800 px-4 py-2 font-semibold text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-300",children:[e.jsx(z,{className:"text-xl sm:text-2xl"}),"Upload Video"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.jsx(M.Provider,{value:{className:"text-xl sm:text-2xl"},children:x.map((l,n)=>e.jsxs("div",{className:"p-6 rounded-lg bg-[#131313] flex flex-col items-center hover:bg-[#0e0e0e] transition-colors duration-300",children:[e.jsx("div",{className:"mb-4 flex items-center justify-center h-12 w-12 rounded-full bg-blue-200 text-blue-600",children:l.icon}),e.jsx("h6",{className:"text-gray-400",children:l.title}),e.jsx("p",{className:"text-2xl sm:text-3xl font-semibold",children:l.value})]},n))})}),o&&e.jsx(W,{}),c&&h&&e.jsx(K,{}),e.jsx(J,{})]})})}export{ae as default};
